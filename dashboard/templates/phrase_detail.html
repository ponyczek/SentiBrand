{% extends 'base.html' %}
{% load static %}
{% block content %}
    <div class="dashboard-page">
        <div class="row equal-sides">
            <div class="col-sm-2 trim-right">
                {% include 'dashboard_navigation.html' %}
            </div>
            {#            {{ search_records.first }}#}
            {#                        {% for search in search_records %}#}
            {#                            <b>{{ search.id }} || {{ search.created_at }} </b><br>#}
            {#                            <br>#}
            {#                        {% endfor %}#}
            <div class="col-sm-10 trim-left">
                <div class="dashboard-main card">
                    {% include 'phrases_menu.html' %}
                    <div class="card-body">
                        <h2 class="text-center">Analysis of collected data</h2>

                        {% include 'search-tools.html' %}
                        <div class="tab-content text-center ">
                            {% include 'phrase_map.html' %}
                            <div class="statistics-holder">
                                {% include 'statistics.html' %}
                                {% include 'phrase_timeline.html' %}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <script>
            var range_start = ({{search_records.first.created_at |date:"U"}}) * 1000;
            var range_end = ({{ search_records.last.created_at |date:"U"}}) * 1000;
            $("#date-range-slider").slider({
                tooltip: 'show',
                range: true,
                min: range_start,
                max: range_end,
                step: 60000,
                    set: function( event, ui ) {
        /*the below will work */
        console.log("test");
      },
                formatter: function (value) {
                    if (typeof (value) === "number") {
                        return moment(value).format("YYYY-MM-DD HH:mm");
                    }
                    else {
                        var output = [];
                        value.forEach(function (val) {
                            output.push(moment(val).format("YYYY-MM-DD HH:mm"));
                        });
                        return output;
                    }
                },

            });
        </script>
        <script src="{% static 'js/helper-functions.js' %}"></script>
        <script src="{% static 'js/deal-with-ui.js' %}"></script>
        <script src="{% static 'js/draw-charts-chartist.js' %}"></script>
        <script src="{% static 'js/draw-charts-chartjs.js' %}"></script>
        <script src="{% static 'js/twitter-handler.js' %}"></script>
        <script src="{% static 'js/sockets.js' %}"></script>
    </div>
{% endblock %}
